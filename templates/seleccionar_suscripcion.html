{% extends "base.html" %}
{% load static %}

{% block title %}Seleccionar Suscripción{% endblock %}

{% block content %}
<section class="subscription-section">
    <h1 class="store-title">Selecciona la duración de cada suscripción</h1>

    <form method="POST" action="{% url 'agregar_suscripcion_al_carrito' %}">
        {% csrf_token %}

        <div class="product-list">
            {% for producto in productos %}
                <div class="product-item product-container">
                    <h2 class="product-name">{{ producto.nombre }}</h2>
                    <img src="{% if producto.imagen %}{{ producto.imagen.url }}{% else %}{% static 'img/default.png' %}{% endif %}" class="product-img" alt="{{ producto.nombre }}">
                    <p class="product-price">Precio: {{ producto.precio }} €/mes</p>

                    <label for="duracion_{{ producto.id }}">Duración de la suscripción:</label>
                    <select name="duraciones[]" id="duracion_{{ producto.id }}" required>
                        <option value="">-- Elegir duración --</option>
                        <option value="3">3 meses</option>
                        <option value="6">6 meses</option>
                        <option value="12">12 meses</option>
                    </select>

                    <input type="hidden" name="productos[]" value="{{ producto.id }}">
                </div>
            {% endfor %}
        </div>

        <button type="submit" class="btn-buy">Suscribirse</button>
    </form>
</section>
{% endblock %}
